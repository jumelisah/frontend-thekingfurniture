import { Row, Col, Button, Form, DropdownButton, Dropdown } from "react-bootstrap"
import Input from "../components/Input"
import carts from "../styles/cart.module.scss"
import Image from "next/image"
import Head from "next/head"
import visa from "../public/images/logos_visa.png"
import { useEffect } from "react"
import { useDispatch, useSelector } from "react-redux"
import { getCart, checoutCart } from "../redux/actions/cart"

const SellingProduct = () => {
    const dispatch = useDispatch()
    const {cart} = useSelector(state=>state)

    useEffect(()=>{
        getCart(dispatch)
    }, [])

    const onCheckout = (e) => {
        e.preventDevault
        const data = {}
        cart.data?.forEach(element => {
            console.log(element)
            data.id_transaction_status = 2
            checoutCart(dispatch, element.id, data)
        });
    }
    return (
        <>
            <Head>
            <title>The King | Cart Checkout</title>
            <meta name="description" content="Generated by create next app" />
            <link rel="icon" href="/favicon.ico" />
            </Head>
            <div className={`${carts.containers} `}>
                <div className={`${carts.profiles} `}>
                    <div className="d-flex flex-column justify-content-center">
                        <div style={{fontSize:"16px", fontFamily:"Rubik"}} className="text-justify p-auto px-5 mx-5 mt-5 nav-text">
                            <span >Cart {""}</span><span className="text-yellow-800"> {">"} </span>
                        </div>
                        <div className={`${carts.content} text-center mb-2 mt-3`}>Check Out</div>
                        <div className={`${carts.contents} text-center mb-5`}>Pay and get your ordered items</div>
                    </div>
                </div>
                <div className="px-5 mx-5 mt-5 pt-3">
                    <Row>
                        <Col xs={12} md={3}></Col>
                        <Col xs={12} md={6}>
                            <h4 className='mt-5'>Self Information</h4>
                            <Input
                                type="text"
                                id="price"
                                name="name"
                                aria-describedby="name"
                                className='me-5 py-3 mt-5'
                                placeholder='Your Name *'
                            />
                            <Input
                                type="text"
                                id="stock"
                                name="address"
                                aria-describedby="address"
                                className='me-5 py-3 mt-2'
                                placeholder='Address *'
                            />
                            <div className="d-flex align-items-center">
                                <Form.Select aria-label="Default select example" className={`${carts.dropdown} mt-2`}>
                                    <option >+62</option>
                                    <option >+165</option>
                                    <option >+52</option>
                                    <option >+32</option>
                                </Form.Select>
                                <Input
                                    type="text"
                                    id="stock"
                                    name="phone"
                                    aria-describedby="phone"
                                    className=' py-3 mt-2'
                                    placeholder='Phone Number *'
                                />
                            </div>
                            <Form.Select aria-label="Default select example" className={`${carts.pay} mt-2`}>
                                <option ><span><Image src={visa} width={62} height={20} alt="visa" /></span>Pay with Visa</option>
                                <option ><span><Image src={visa} width={62} height={20} alt="visa" /></span>Pay with Mastercard</option>
                                <option ><span><Image src={visa} width={62} height={20} alt="visa" /></span>Pay with Cirrus</option>
                                <option ><span><Image src={visa} width={62} height={20} alt="visa" /></span>Pay with Paypal</option>
                            </Form.Select>
                        </Col>
                        <Col xs={12} className='text-center mt-3 mb-5'>
                            <Button onClick={onCheckout} styleCart={carts.buttonCO}>Check Out</Button>
                        </Col>
                    </Row>                    
                </div>                 
            </div>
        </>
    )
}

export default SellingProduct